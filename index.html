<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Move, Player 2</title>
<style>
@font-face { 
  font-family: "ArcadeClassic OFF"; 
  src: url("fonts/ArcadeClassic.woff2") format("woff2"),
       url("fonts/ArcadeClassic.woff") format("woff");
}

body, h1, p, button, .score-number, .high-score, .combo, .ticker, .meter-bar {
  font-family: "ArcadeClassic OFF", monospace !important;
}

body{
  margin:0; height:100vh; display:flex; justify-content:center; align-items:center; 
  overflow:hidden; 
  background:radial-gradient(circle at top,#ff00c8,#ff7a00 40%,#1a001f 80%); 
  color:white;
}

.grid{
  position:fixed; bottom:0; width:200%; height:60%;
  background:linear-gradient(to right,#00fff7 1px,transparent 1px),
             linear-gradient(to top,#00fff7 1px,transparent 1px);
  background-size:40px 40px; 
  transform:perspective(400px) rotateX(60deg); 
  animation:moveGrid 6s linear infinite; 
  opacity:0.4;
}
@keyframes moveGrid{from{background-position:0 0;} to{background-position:0 40px;}}

body::after{
  content:""; 
  position:fixed; 
  width:100%; 
  height:100%; 
  background:repeating-linear-gradient(to bottom,rgba(255,255,255,0.03),rgba(255,255,255,0.03) 1px,transparent 1px,transparent 3px); 
  pointer-events:none;
}

.container{
  width:95vw; 
  max-width:520px; 
  height:92vh; 
  border:6px solid #00fff7; 
  box-shadow:0 0 25px #ff00c8; 
  background: rgba(0,0,0,0.7); /* changed from solid black */
  padding:20px; 
  text-align:center; 
  display:flex; 
  flex-direction:column; 
  justify-content:center; 
  align-items:center; 
  z-index:2;
}

.hidden{display:none;}
h1{color:#ff00c8;}
button{
  width:100%; 
  padding:12px; 
  margin:6px 0; 
  background:black; 
  border:3px solid #ff7a00; 
  color:#00fff7; 
  cursor:pointer;
}
button:hover{background:#00fff7;color:black;}
.score-number{color:#ff7a00;margin:6px;}
.high-score{color:#00ff88;margin-bottom:8px;}
.combo{color:yellow;margin-bottom:6px;}
.meter-container{width:100%; height:18px; border:2px solid #ff00c8; margin-bottom:10px;}
.meter-bar{height:100%; width:0%; background:#00fff7; transition:0.3s;}
.ticker{border:2px solid #00fff7; padding:15px; margin:10px 0; min-height:40px; width:90%;}
.level-up{position:absolute; top:20%; font-size:30px; color:yellow; animation:blink 0.5s infinite;}
@keyframes blink{50%{opacity:0;}}
.explosion{position:absolute; font-size:40px; animation:boom 0.6s forwards;}
@keyframes boom{0%{transform:scale(0);}50%{transform:scale(1.4);}100%{transform:scale(0);}}

.nice-text{
  position:absolute; top:80%; font-size:20px; color:#00ff88; text-shadow:0 0 10px #0ff;
  animation:nicePulse 0.8s forwards;
  z-index:10;
}
@keyframes nicePulse{
  0%{opacity:0; transform:scale(0.5);}
  50%{opacity:1; transform:scale(1.3);}
  100%{opacity:1; transform:scale(1);}
}
</style>
</head>
<body>
<div class="grid"></div>
<div class="container">

<!-- START SCREEN -->
<div id="startScreen">
<h1>YOUR MOVE, PLAYER 2</h1>
<p>Level up the talking stage!</p>
<div class="high-score">HIGH SCORE: <span id="highScore">0</span></div>
<div class="score-number">Score: <span id="score">0</span>/100</div>
<div class="combo">Combo: x<span id="combo">1</span></div>
<div class="meter-container"><div id="meterBar" class="meter-bar"></div></div>
<button onclick="startGame()">START GAME</button>
</div>

<!-- MAIN SCREEN -->
<div id="mainScreen" class="hidden">
<h2>CHOOSE YOUR MOVE TO BE SMOOTH</h2>
<div class="high-score">HIGH SCORE: <span id="highScoreMain">0</span></div>
<div class="score-number">Score: <span id="scoreMain">0</span>/100</div>
<div class="combo">Combo: x<span id="comboMain">1</span></div>
<div class="meter-container"><div id="meterBarMain" class="meter-bar"></div></div>

<button onclick="convoDied()">OH NO, THE CONVO DIED</button>
<button onclick="goTo('complimentScreen')">GIVE A COMPLIMENT</button>
<button onclick="goTo('dateScreen')">PLAN A DATE</button>
<button onclick="resetGame()">END GAME</button>
</div>

<!-- COMPLIMENT SCREEN -->
<div id="complimentScreen" class="hidden">
<h1>COMPLIMENT HER ON...</h1>
<div class="high-score">HIGH SCORE: <span id="highScoreComp">0</span></div>
<div class="score-number">Score: <span id="scoreComp">0</span>/100</div>
<div class="combo">Combo: x<span id="comboComp">1</span></div>
<div class="meter-container"><div id="meterBarComp" class="meter-bar"></div></div>

<button onclick="generateComplimentTicker()">CLICK TO GENERATE</button>
<div class="ticker" id="complimentTicker">---</div>
<button onclick="goTo('mainScreen')">BACK</button>
</div>

<!-- OH NO SCREEN -->
<div id="askScreen" class="hidden">
<h1>OH NO, THE CONVO DIED</h1>
<div class="high-score">HIGH SCORE: <span id="highScoreAsk">0</span></div>
<div class="score-number">Score: <span id="scoreAsk">0</span>/100</div>
<div class="combo">Combo: x<span id="comboAsk">1</span></div>
<div class="meter-container"><div id="meterBarAsk" class="meter-bar"></div></div>

<button onclick="generateAskTicker()">CLICK TO GENERATE</button>
<div class="ticker" id="askTicker">---</div>
<button onclick="goTo('mainScreen')">BACK</button>
</div>

<!-- DATE SCREEN -->
<div id="dateScreen" class="hidden">
<h1>PLAN A DATE...</h1>
<div class="high-score">HIGH SCORE: <span id="highScoreDate">0</span></div>
<div class="score-number">Score: <span id="scoreDate">0</span>/100</div>
<div class="combo">Combo: x<span id="comboDate">1</span></div>
<div class="meter-container"><div id="meterBarDate" class="meter-bar"></div></div>

<button onclick="generateDateTicker()">CLICK TO GENERATE</button>
<div class="ticker" id="dateTicker">---</div>
<button onclick="goTo('mainScreen')">BACK</button>
</div>

<!-- AUDIO -->
<audio id="lockSound"><source src="https://assets.mixkit.co/active_storage/sfx/2018/2018-preview.mp3"></audio>
<audio id="explodeSound"><source src="https://assets.mixkit.co/active_storage/sfx/2067/2067-preview.mp3"></audio>
<audio id="bgMusic" loop><source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8c8a73467.mp3"></audio>

<script>
// SCORES
let score=0, combo=1, highScore=localStorage.getItem("highScore")||0;

// Start game
function startGame(){
    document.getElementById("bgMusic").play();
    goTo('mainScreen');
}

// Navigation
function goTo(screen){
    document.querySelectorAll('.container > div').forEach(d=>d.classList.add('hidden'));
    document.getElementById(screen).classList.remove('hidden');
    updateAllMeters();
    clearAllIntervals();
}

// Update all meters for each page
function updateAllMeters(){
    document.querySelectorAll('.score-number span').forEach(e=>e.innerText=score);
    document.querySelectorAll('.combo span').forEach(e=>e.innerText=combo);
    document.querySelectorAll('.meter-bar').forEach(e=>e.style.width = score+'%');
    document.querySelectorAll('.high-score span').forEach(e=>e.innerText = highScore);
}

// Clear intervals
let complimentInterval=null, askInterval=null, dateInterval=null;
function clearAllIntervals(){
    if(complimentInterval) clearInterval(complimentInterval);
    if(askInterval) clearInterval(askInterval);
    if(dateInterval) clearInterval(dateInterval);
}

// Add score
function addScore(points){
    score += points*combo;
    if(score>100) score=100;
    combo++;
    if(score>highScore){
        highScore=score;
        localStorage.setItem("highScore",highScore);
    }
    updateAllMeters();
}

// EXPLOSION
function convoDied(){
    score -= 20;
    if(score<0) score=0;
    combo=1;
    explode();
    updateAllMeters();
    goTo('askScreen');
}
function explode(){
    let boom = document.createElement("div");
    boom.className="explosion";
    boom.innerText="ðŸ’¥";
    document.body.appendChild(boom);
    setTimeout(()=>boom.remove(),600);
}

// RESET GAME
function resetGame(){
    score=0;
    combo=1;
    updateAllMeters();
    goTo('startScreen');
}

// COMPLIMENT TICKER
const compliments=["You look great","You're really interesting","You're funny","I love that photo","Love your energy!","You'd be so fun on a date"];
function generateComplimentTicker(){
    clearAllIntervals();
    const ticker = document.getElementById("complimentTicker");
    let i=0;
    complimentInterval = setInterval(()=>{
        ticker.innerText = compliments[Math.floor(Math.random()*compliments.length)];
        i++;
        if(i>15){
            clearInterval(complimentInterval);
            document.getElementById("lockSound").play();
            addScore(10);
            showNiceText();
        }
    },100);
}

// ASK TICKER
const askTopics = ["Her zodiac sign","Her favourite cocktail","What suburb she lives in","A movie she watched recently","Her favourite emoji at work","Her favourite meal to cook"];
function generateAskTicker(){
    clearAllIntervals();
    const ticker = document.getElementById("askTicker");
    let i=0;
    askInterval = setInterval(()=>{
        ticker.innerText = askTopics[Math.floor(Math.random()*askTopics.length)];
        i++;
        if(i>15){
            clearInterval(askInterval);
            document.getElementById("lockSound").play();
            addScore(10);
            showNiceText();
        }
    },100);
}

// DATE TICKER
const dateOptions = ["Night in and cook","See a movie","Go to a comedy show","Cocktails at a bar","Pub trivia","Botanic Gardens stroll","Arcade","Game of pool","Beach day"];
function generateDateTicker(){
    clearAllIntervals();
    const ticker = document.getElementById("dateTicker");
    let i=0;
    dateInterval = setInterval(()=>{
        ticker.innerText = dateOptions[Math.floor(Math.random()*dateOptions.length)];
        i++;
        if(i>15){
            clearInterval(dateInterval);
            document.getElementById("lockSound").play();
            addScore(10);
            showNiceText();
        }
    },100);
}

// NICE TEXT
function showNiceText(){
    let text = document.createElement("div");
    text.className="nice-text";
    text.innerText="nice";
    document.body.appendChild(text);
    setTimeout(()=>text.remove(),800);
}
</script>
</body>
</html>
